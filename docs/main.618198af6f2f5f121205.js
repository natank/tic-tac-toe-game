!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){!function({boards:e,displayMove:t,gameOngoing:n},r,o){e[t].forEach((e,t)=>{let l=function(e,t,n,r){let o=document.createElement("div");o.innerHTML='\n      <div class="cell__placeholder"></div>\n      <span class="cell__content"></span>\n  ',o.setAttribute("index",t),o.classList.add("cell"),null===e.value?o.classList.add("cell--empty"):"player-x"===e.value?o.classList.add("cell--x"):"player-o"===e.value&&o.classList.add("cell--o");e.isSequence&&o.classList.add("cell--sequence");null===e.value&&n&&o.addEventListener("click",r);return o}(e,t,n,o);l=r.appendChild(l)})}(e,function(e){let t=document.createElement("div");t.classList.add("board"),t.setAttribute("style","--dimension: "+e);let n=document.querySelector(".board");n&&n.parentNode.removeChild(n);return document.querySelector("#board-container").appendChild(t)}(e.boardDimension),t)}function o(e){return JSON.parse(JSON.stringify(e))}let l,a={boards:[],displayMove:0,turn:"player-x",gameOngoing:!1,boardDimension:3};function u(e){return Object.keys(e).forEach(t=>{a[t]=e[t]}),o(a)}function i(){return o(a)}function c(e){let t,n,r;l=e;let o=i(),{boardDimension:a}=o;if(t=function(){let e,t,n=i(),{boardDimension:r}=n;for(e=0;e<r;e++){let n=0;t=d(e,n,r);let o=l[t].value,a=!0;for(n=0;n<r;n++){t=d(e,n,r);let u=l[t].value;u&&u===o||(a=!1)}if(a)return e}return null}(),null===t&&(n=function(){let e,t,n,r=i(),{boardDimension:o}=r;for(t=0;t<o;t++){e=0,n=d(e,t,o);let r=l[n].value,a=!0;for(e=0;e<o;e++){n=d(e,t,o);let u=l[n].value;u&&u===r||(a=!1)}if(a)return t}return null}()),null===n&&(r=function(){let e,t,n,r,o=i(),{boardDimension:a}=o;t=0,e=0,n=d(e,t,a),r=l[n].value;let u=!0;for(e=0;e<a;e++){t=e,n=d(e,t,a);let o=l[n].value;o&&o==r||(u=!1)}if(u)return"tl";for(u=!0,e=0,t=a-1,n=d(e,t,a),r=l[n].value,e=0;e<a;e++){t=a-e-1;let n=d(e,t,a),o=l[n].value;o&&o==r||(u=!1)}if(u)return"tr";return null}()),null!=t){for(n=0;n<a;n++){let e=d(t,n,a);l[e].isSequence=!0}return!0}if(null!=n){for(t=0;t<a;t++){let e=d(t,n,a);l[e].isSequence=!0}return!0}if(null!=r){let e,t;if("tl"===r)for(e=0;e<a;e++){let t=d(e,e,a);l[t].isSequence=!0}else if("tr"===r)for(e=0,e=0;e<a;e++){t=a-e-1;let n=d(e,t,a);l[n].isSequence=!0}return!0}return!1}function d(e,t,n){return e*n+t}function s(e){e.preventDefault();let t=i(),{boards:n,turn:l,displayMove:a}=t;a++;let d=o(n[n.length-1]);if(d[e.target.parentElement.getAttribute("index")].value=l,c(d)){t=u({gameOngoing:!1});let e=localStorage.getItem("record");(!e||e>a)&&localStorage.setItem("record",a)}n.push(d),l="player-x"===t.turn?"player-o":"player-x",t=u({boards:n,turn:l,displayMove:a}),r(t,s)}function f(e){e.preventDefault(),b()}function p(){event.preventDefault();let{boards:e,displayMove:t,turn:n}=i();if(e.length>1){e.pop(),t=0===t?t:--t,n="player-x"===n?"player-y":"player-x";e.length;r(i(),s),u({boards:e,displayMove:t,turn:n,gameOngoing:!0})}}function v(e){e.preventDefault();let t=localStorage.getItem("record");t?alert(`The record is ${t} moves`):alert("Thre's no record yet")}function m(e){e.preventDefault(),function(e){localStorage.setItem("gameState",JSON.stringify(e))}(i())}function y(e){e.preventDefault();let t=JSON.parse(localStorage.getItem("gameState"));t=u(t),r(t,s)}function g(e){e.preventDefault();let t=prompt("Enter board dimension (between 3-8)");t&&t>=3&&t<=8&&u({boardDimension:t}),b()}function b(){let e=i(),t=[];for(let n=0;n<e.boardDimension**2;n++)t.push({value:null,sequence:!1});e=u({boards:[t],turn:"player-x",displayMove:0,gameOngoing:!0}),r(e,s)}var S=function(){document.querySelector(".container").insertAdjacentHTML("afterbegin","<h1>Let's play Tic Tac Toe</h1>"),b(),function({onNewGame:e,onChangeBoard:t,onDeleteLast:n,onGetRecord:r,onSaveGame:o,onUploadGame:l}){document.querySelector(".control-panel--new").addEventListener("click",e),document.querySelector(".control-panel--dimension").addEventListener("click",t),document.querySelector(".control-panel--delete-last").addEventListener("click",n),document.querySelector(".control-panel--record").addEventListener("click",r),document.querySelector(".control-panel--save").addEventListener("click",o),document.querySelector(".control-panel--upload").addEventListener("click",l)}({onMove:s,onNewGame:f,onDeleteLast:p,onGetRecord:v,onSaveGame:m,onUploadGame:y,onChangeBoard:g})};document.addEventListener("DOMContentLoaded",()=>{S()})}]);